<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="form_tao_hop_dong" model="ir.ui.view">
        <field name="name">mhd.hopdong.wizard</field>
        <field name="model">mhd.hopdong</field>
        <field name="arch" type="xml">
            <form string="Tạo hợp đồng">
                <sheet>
                    <div class="oe_title pr-0">
                        <h1 class="d-flex flex-row justify-content-between">
                            <field name="name" class="o_task_name text-truncate" placeholder="Tên tài sản"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="datalist_id" widget="many2many_tags"
                                   options="{'no_open': True, 'no_create': True}"
                                   domain="[('nhanvien', '=', uid)]"/>
                            <field name="nhanvien"/>
                            <field name="hopdong_date" placeholder="Số hợp đồng tự động lấy dựa theo ngày"/>
                            <field name="thanhtoan_tongphi"/>
                            <field name="thanhtoan_vat"/>
                            <field name="tinhtrangkyket"/>
                            <span class="o_form_label o_td_label">
                                <b>Thông tin đối tác</b>
                            </span>
                            <field name="doitac_id" placeholder="Chọn tên đối tác/ Tín dụng"/>
                            <field name="doitac_groups" invisible="doitac_id == False"/>
                            <field name="doitac_name" invisible="doitac_id == False"/>
                            <field name="doitac_area" invisible="doitac_id == False"/>
                        </group>
                        <group>
                            <field name="hopdong_type"/>
                            <field name="khachhang_id" invisible="hopdong_type == False"/>
                            <span class="o_form_label o_td_label" invisible="hopdong_type == False">
                                <b>Địa chỉ</b>
                            </span>
                            <div class="o_address_format">
                                <field name="khachhang_street" placeholder="Số nhà, tên đường..." class="o_address_street" invisible="hopdong_type == False"/>
                                <field name="khachhang_street2" placeholder="Phường/ xã..." class="o_address_street" invisible="hopdong_type == False"/>
                                <field name="khachhang_city" placeholder="Quận/ huyện" class="o_address_city" invisible="hopdong_type == False"/>
                                <field name="state_id" class="o_address_state" placeholder="Tỉnh"
                                       options="{'no_open': True, 'no_quick_create': True}"
                                       context="{'country_id': country_id}"
                                       invisible="hopdong_type == False"/>
                                <field name="zip" placeholder="Mã tỉnh" class="o_address_zip" invisible="hopdong_type == False"/>
                                <field name="country_id" placeholder="Quốc gia" class="o_address_country"
                                       options="{'no_open': True, 'no_create': True}"
                                       invisible="hopdong_type == False"/>
                            </div>
                            <field name="khachhang_phone" invisible="hopdong_type == False"/>
                            <field name="khachhang_email" invisible="hopdong_type == False"/>
                            <field name="khachhang_cmnd"
                                   invisible="hopdong_type != 'ca_nhan'"
                                   required="hopdong_type == 'ca_nhan'"/>
                            <field name="khachhang_cmnd_ngaycap" invisible="hopdong_type != 'ca_nhan'"/>
                            <field name="khachhang_cmnd_noicap" invisible="hopdong_type != 'ca_nhan'"/>
                            <field name="khachhang_vat"
                                   invisible="hopdong_type == 'ca_nhan' or hopdong_type == False"
                                   required="hopdong_type != 'ca_nhan' and hopdong_type != False"/>
                            <field name="khachhang_daidien"
                                   invisible="hopdong_type == 'ca_nhan' or hopdong_type == False"/>
                            <field name="khachhang_daidien_chucvu"
                                   invisible="hopdong_type == 'ca_nhan' or hopdong_type == False"/>
                        </group>
                    </group>
                </sheet>
                <footer>
                    <button name="create_hop_dong" id="create_hop_dong" string="Xác nhận" type="object" class="btn-primary"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="tao_hop_dong" model="ir.actions.act_window">
        <field name="name">Tạo hợp đồng</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">mhd.hopdong</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="form_tao_hop_dong"/>
    </record>
</odoo>
